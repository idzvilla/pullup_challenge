# Инструкция по деплою на Railway

## Шаг 1: Подготовка

1. Создайте бота в Telegram через [@BotFather](https://t.me/BotFather)
   - Отправьте `/newbot`
   - Следуйте инструкциям
   - Сохраните полученный токен

2. Создайте аккаунт на [Railway](https://railway.app)

## Шаг 2: Создание проекта на Railway

1. Войдите в Railway и создайте новый проект
2. Выберите "Deploy from GitHub repo" (если у вас есть репозиторий) или "Empty Project"

## Шаг 3: Добавление PostgreSQL

1. В проекте нажмите "+ New"
2. Выберите "Database" → "Add PostgreSQL"
3. Railway автоматически создаст базу данных и установит переменную `DATABASE_URL`

## Шаг 4: Настройка переменных окружения

В настройках проекта (Settings → Variables) добавьте:

- `TELEGRAM_BOT_TOKEN` - токен вашего бота от @BotFather
- `CHALLENGE_START_DATE` - `2025-12-01` (дата начала челленджа)
- `CHALLENGE_END_DATE` - `2026-11-30` (дата окончания челленджа)
- `CHALLENGE_TARGET` - `18250` (цель челленджа)
- `REMINDER_TIME` - `09:00` (время напоминаний в UTC)

**Примечание:** `DATABASE_URL` будет автоматически установлен Railway при добавлении PostgreSQL.

## Шаг 5: Деплой

1. Если вы используете GitHub:
   - Подключите репозиторий
   - Railway автоматически определит `Procfile` и запустит бота

2. Если вы деплоите вручную:
   - Убедитесь, что `Procfile` присутствует в корне проекта
   - Railway автоматически определит Python проект и установит зависимости

## Шаг 6: Проверка

1. После деплоя проверьте логи в Railway
2. Найдите вашего бота в Telegram и отправьте `/start`
3. Проверьте, что бот отвечает и работает корректно

## Решение проблем

### Бот не запускается
- Проверьте логи в Railway
- Убедитесь, что `TELEGRAM_BOT_TOKEN` установлен правильно
- Проверьте, что `DATABASE_URL` установлен (должен быть автоматически)

### Ошибки подключения к БД
- Убедитесь, что PostgreSQL добавлен в проект
- Проверьте, что `DATABASE_URL` установлен
- Проверьте логи на наличие ошибок подключения

### Напоминания не работают
- Убедитесь, что `REMINDER_TIME` установлен в формате `HH:MM` (UTC)
- Проверьте логи на наличие ошибок в job queue

## Мониторинг

- Логи доступны в разделе "Deployments" → выберите деплоймент → "View Logs"
- Метрики доступны в разделе "Metrics"

